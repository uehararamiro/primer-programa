API CONTRACT â€” Mini WeTransfer (v1)


ğŸ” AUTH

    1ï¸âƒ£ POST /auth/register

    Crear un usuario.

    2ï¸âƒ£ POST /auth/login

    Iniciar sesiÃ³n y obtener token.


-----------------------------------


ğŸ“ FILES (privado, requiere login)

    3ï¸âƒ£ POST /files

    Subir archivo.

    4ï¸âƒ£ GET /files

    Listar mis archivos.

    5ï¸âƒ£ DELETE /files/:id

    Borrar un archivo propio.



-----------------------------------



ğŸŒ FILES (pÃºblico)
    6ï¸âƒ£ GET /f/:publicId

    Descargar archivo por link pÃºblico.



----------------------------------------------------------------

ğŸ” AutenticaciÃ³n

POST /auth/register

    â“ Â¿QuÃ© acciÃ³n es?

    Crear un usuario nuevo.

    â“ Â¿Por quÃ© POST?

    Porque:

    crea un recurso

    cambia el estado del sistema

    GET no sirve para crear.

    Request
        {
          "email": "user@mail.com",
          "password": "123456"
        }
    
    Response(201)
        {
          "id": "user_id"
        }

    âš ï¸ Errores
      400 â†’ datos mal formados
      409 â†’ email ya existe


 
POST /auth/login

    DescripciÃ³n: login del filmmaker

    Request

        {
          "email": "user@mail.com",
          "password": "123456"
        }

    Response 200

        {
          "token": "jwt_token",
          "user": {
            "id": "u1",
            "email": "user@mail.com"
          }
        }

    Errores
    401 -> Credenciales Invalidas

        {
          "error": "invalid_credentials"
        }



----------------------------------


ğŸ“ 3ï¸âƒ£ POST /files

    â“ Â¿QuÃ© acciÃ³n es?

    Subir un archivo â†’ crear un recurso File.

    â“ Â¿Por quÃ© POST?

    Porque:

    crea algo nuevo

    cambia el sistema

    tiene body grande (archivo)

ğŸ” Headers
    Authorization: Bearer JWT_TOKEN
    Sin esto â†’ 401.

ğŸ“¥ Request (body)

    tipo: multipart/form-data
    campo: file
    ğŸ‘‰ el archivo vive en el body

ğŸ“¤ Response (201)
    {
      "id": "file_id",
      "filename": "video.mp4",
      "size": 12345678,
      "publicUrl": "https://app.com/f/abc123"
    }

âš ï¸ Errores
    401 â†’ no logueado
    500 â†’ error al subir




----------------------------------



ğŸ“ 4ï¸âƒ£ GET /files
    â“ Â¿QuÃ© acciÃ³n es?

      -Leer mis archivos.

    â“ Â¿Por quÃ© GET?

      Porque:
      -no crea
      -no modifica
      -solo lee

    ğŸ” Headers
        Authorization: Bearer JWT_TOKEN

    ğŸ“¥ Request
        âŒ sin body
        (opcionalmente query params despuÃ©s)

    ğŸ“¤ Response (200)
        [
          {
            "id": "file_id",
            "filename": "video.mp4",
            "size": 12345678,
            "publicUrl": "https://app.com/f/abc123",
            "createdAt": "2025-01-01T12:00:00Z"
          }
        ]
    
    âš ï¸ Errores
        401 â†’ no autorizado



----------------------------------


ğŸ—‘ï¸ 5ï¸âƒ£ DELETE /files/:id
    â“ Â¿QuÃ© acciÃ³n es?

    -Eliminar un archivo.

    â“ Â¿Por quÃ© DELETE?

    Porque:
    -borra un recurso
    -semÃ¡ntica clara

    ğŸ” Headers
        Authorization: Bearer JWT_TOKEN

    ğŸ“¥ Request
        -el id va en la URL
        -no necesita body

    ğŸ“¤ Response (200)
        {
          "success": true
        }

    âš ï¸ Errores
        401 â†’ no logueado
        403 â†’ no es tu archivo
        404 â†’ no existe



----------------------------------


ğŸŒ 6ï¸âƒ£ GET /f/:publicId
    â“ Â¿QuÃ© acciÃ³n es?

        -Descargar un archivo pÃºblico.

    â“ Â¿Por quÃ© GET?

        Porque:
        -solo lee
        -no requiere auth
        -es un link compartible

    ğŸ“¥ Request

        -publicId en la URL
        -sin headers especiales

    ğŸ“¤ Response

        -el archivo (stream)
        -o 404 si no existe